<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DhouseData EFS Portal</title>
  <meta name="description" content="DhouseData EFS Portal Access" />
  <style>
    :root {
      --bg: #0b1220;
      --card: rgba(255,255,255,0.06);
      --card-border: rgba(255,255,255,0.12);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.7);
      --accent: #4f46e5;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; width: 100%; overflow: hidden; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background: var(--bg); }

    .wrap {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 28px 18px;
    }
    .card {
      width: 100%;
      max-width: 860px;
      padding: 22px 22px;
      border-radius: 16px;
      background: var(--card);
      border: 1px solid var(--card-border);
      box-shadow: 0 18px 60px rgba(0,0,0,0.35);
      color: var(--text);
      backdrop-filter: blur(10px);
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }
    .logo {
      width: 38px; height: 38px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), #22c55e);
      box-shadow: 0 10px 24px rgba(79,70,229,0.35);
    }
    .title { font-weight: 800; font-size: 18px; letter-spacing: 0.2px; }
    .subtitle { margin-top: 6px; color: var(--muted); line-height: 1.5; }

    .hint {
      margin-top: 14px;
      padding: 12px 12px;
      background: rgba(255,255,255,0.05);
      border: 1px dashed rgba(255,255,255,0.18);
      border-radius: 12px;
      color: rgba(255,255,255,0.86);
      font-size: 13px;
      overflow-wrap: anywhere;
    }
    .hint code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      color: rgba(255,255,255,0.92);
    }
    .btnrow { display: flex; gap: 10px; margin-top: 16px; flex-wrap: wrap; }
    a.btn {
      display: inline-block;
      text-decoration: none;
      background: var(--accent);
      color: white;
      padding: 10px 14px;
      border-radius: 10px;
      font-weight: 650;
      font-size: 14px;
    }
    a.btn.secondary {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.14);
      color: rgba(255,255,255,0.9);
    }

    iframe { width: 100%; height: 100%; border: 0; display: block; background: #fff; }
  </style>
</head>
<body>
  <script>
    // --- CONFIG: set your Apps Script exec URL here ---
    var APPS_SCRIPT_EXEC_URL = 'https://script.google.com/macros/s/AKfycbxIVRKVqn1fcsmcdXtG0uTk12xrtZpukQ97oIgxOTA1ho9yUOtok7lEntXAZNKSeHTg/exec';

    // Preserve query string exactly as received
    var query = window.location.search || '';

    // Optional: support token in hash like #token=abc
    if (!query && window.location.hash && window.location.hash.includes('token=')) {
      query = '?' + window.location.hash.replace(/^#/, '');
    }

    var hasToken = query && /(^|[?&])token=/.test(query);

    if (!hasToken) {
      var example = window.location.origin + '/?token=YOUR_TOKEN';
      document.body.innerHTML =
        '<div class="wrap">' +
          '<div class="card">' +
            '<div class="brand">' +
              '<div class="logo"></div>' +
              '<div>' +
                '<div class="title">DhouseData EFS Portal</div>' +
                '<div class="subtitle">Your access link is missing the <b>token</b>. Please use the portal link provided to you.</div>' +
              '</div>' +
            '</div>' +
            '<div class="hint">Example: <code>' + example + '</code></div>' +
            '<div class="btnrow">' +
              '<a class="btn secondary" href="https://dhousedata.com" target="_blank" rel="noopener">Go to dhousedata.com</a>' +
            '</div>' +
          '</div>' +
        '</div>';
    } else {
      var iframe = document.createElement('iframe');
      iframe.src = APPS_SCRIPT_EXEC_URL + query;
      iframe.allow = 'forms';
      document.body.innerHTML = '';
      document.body.appendChild(iframe);
    }
  </script>
</body>
</html>
